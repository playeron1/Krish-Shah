import{select as t}from"d3-selection";import{ascending as n,timeSecond as e,timeMinute as r,timeHour as o,timeDay as i,timeWeek as a,timeMonth as c,timeYear as u,timeMonday as s,timeTuesday as l,timeWednesday as f,timeThursday as p,timeFriday as d,timeSaturday as h,timeSunday as y,utcSecond as g,utcMinute as v,utcHour as m,utcDay as w,utcWeek as b,utcMonth as S,utcYear as j,utcMonday as $,utcTuesday as O,utcWednesday as k,utcThursday as E,utcFriday as M,utcSaturday as x,utcSunday as T,color as N,descending as P,range as C,symbolAsterisk as R,symbolCircle as I,symbolCross as A,symbolDiamond as D,symbolDiamond2 as L,symbolPlus as q,symbolSquare as F,symbolSquare2 as _,symbolStar as U,symbolTimes as z,symbolTriangle as W,symbolTriangle2 as B,symbolWye as G,geoPath as H,geoTransform as V,geoClipRectangle as Y,geoTransverseMercator as J,geoStereographic as K,geoOrthographic as X,geoMercator as Z,geoGnomonic as Q,geoEquirectangular as tt,geoEqualEarth as nt,geoAzimuthalEquidistant as et,geoAzimuthalEqualArea as rt,geoAlbersUsa as ot,geoConicEquidistant as it,geoConicEqualArea as at,geoConicConformal as ct,geoAlbers as ut,select as st,creator as lt,schemeAccent as ft,schemeCategory10 as pt,schemeDark2 as dt,schemePaired as ht,schemePastel1 as yt,schemePastel2 as gt,schemeSet1 as vt,schemeSet2 as mt,schemeSet3 as wt,schemeTableau10 as bt,quantize as St,interpolateBrBG as jt,interpolatePRGn as $t,interpolatePiYG as Ot,interpolatePuOr as kt,interpolateRdBu as Et,interpolateRdGy as Mt,interpolateRdYlBu as xt,interpolateRdYlGn as Tt,interpolateSpectral as Nt,interpolateBlues as Pt,interpolateGreens as Ct,interpolateGreys as Rt,interpolatePurples as It,interpolateReds as At,interpolateOranges as Dt,interpolateTurbo as Lt,interpolateViridis as qt,interpolateMagma as Ft,interpolateInferno as _t,interpolatePlasma as Ut,interpolateCividis as zt,interpolateCubehelixDefault as Wt,interpolateWarm as Bt,interpolateCool as Gt,interpolateBuGn as Ht,interpolateBuPu as Vt,interpolateGnBu as Yt,interpolateOrRd as Jt,interpolatePuBuGn as Kt,interpolatePuBu as Xt,interpolatePuRd as Zt,interpolateRdPu as Qt,interpolateYlGnBu as tn,interpolateYlGn as nn,interpolateYlOrBr as en,interpolateYlOrRd as rn,interpolateRainbow as on,interpolateSinebow as an,schemeBrBG as cn,schemePRGn as un,schemePiYG as sn,schemePuOr as ln,schemeRdBu as fn,schemeRdGy as pn,schemeRdYlBu as dn,schemeRdYlGn as hn,schemeSpectral as yn,schemeBlues as gn,schemeGreens as vn,schemeGreys as mn,schemeOranges as wn,schemePurples as bn,schemeReds as Sn,schemeBuGn as jn,schemeBuPu as $n,schemeGnBu as On,schemeOrRd as kn,schemePuBu as En,schemePuBuGn as Mn,schemePuRd as xn,schemeRdPu as Tn,schemeYlGn as Nn,schemeYlGnBu as Pn,schemeYlOrBr as Cn,schemeYlOrRd as Rn,scaleLinear as In,scalePow as An,scaleLog as Dn,scaleSymlog as Ln,scaleQuantile as qn,extent as Fn,ticks as _n,interpolateNumber as Un,reverse as zn,scaleThreshold as Wn,scaleIdentity as Bn,max as Gn,interpolateRgb as Hn,interpolateRound as Vn,min as Yn,quantile as Jn,median as Kn,interpolateHsl as Xn,interpolateHcl as Zn,interpolateLab as Qn,scaleDiverging as te,scaleDivergingPow as ne,scaleDivergingLog as ee,scaleDivergingSymlog as re,piecewise as oe,scaleTime as ie,scaleUtc as ae,scaleImplicit as ce,scaleOrdinal as ue,scalePoint as se,scaleBand as le,InternSet as fe,sort as pe,symbolsStroke as de,symbolsFill as he,utcFormat as ye,format as ge,axisBottom as ve,pathRound as me,rgb as we}from"d3";function be(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,"symbol"==typeof(i=function(t,n){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?i:String(i)),r)}var o,i}var Se="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},je=function(t){try{return!!t()}catch(t){return!0}},$e=!je((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),Oe=!je((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),ke=Oe,Ee=Function.prototype,Me=Ee.call,xe=ke&&Ee.bind.bind(Me,Me),Te=ke?xe:function(t){return function(){return Me.apply(t,arguments)}},Ne=function(t){return null==t},Pe=Ne,Ce=TypeError,Re=function(t){if(Pe(t))throw new Ce("Can't call method on "+t);return t},Ie=Re,Ae=Object,De=function(t){return Ae(Ie(t))},Le=De,qe=Te({}.hasOwnProperty),Fe=Object.hasOwn||function(t,n){return qe(Le(t),n)},_e=$e,Ue=Fe,ze=Function.prototype,We=_e&&Object.getOwnPropertyDescriptor,Be=Ue(ze,"name"),Ge={EXISTS:Be,PROPER:Be&&"something"===function(){}.name,CONFIGURABLE:Be&&(!_e||_e&&We(ze,"name").configurable)},He={exports:{}},Ve="object"==typeof document&&document.all,Ye={all:Ve,IS_HTMLDDA:void 0===Ve&&void 0!==Ve},Je=Ye.all,Ke=Ye.IS_HTMLDDA?function(t){return"function"==typeof t||t===Je}:function(t){return"function"==typeof t},Xe=function(t){return t&&t.Math===Math&&t},Ze=Xe("object"==typeof globalThis&&globalThis)||Xe("object"==typeof window&&window)||Xe("object"==typeof self&&self)||Xe("object"==typeof Se&&Se)||Xe("object"==typeof Se&&Se)||function(){return this}()||Function("return this")(),Qe=Ze,tr=Object.defineProperty,nr=function(t,n){try{tr(Qe,t,{value:n,configurable:!0,writable:!0})}catch(e){Qe[t]=n}return n},er=nr,rr="__core-js_shared__",or=Ze[rr]||er(rr,{}),ir=Ke,ar=or,cr=Te(Function.toString);ir(ar.inspectSource)||(ar.inspectSource=function(t){return cr(t)});var ur,sr,lr=ar.inspectSource,fr=Ke,pr=Ze.WeakMap,dr=fr(pr)&&/native code/.test(String(pr)),hr=Ke,yr=Ye.all,gr=Ye.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:hr(t)||t===yr}:function(t){return"object"==typeof t?null!==t:hr(t)},vr={},mr=gr,wr=Ze.document,br=mr(wr)&&mr(wr.createElement),Sr=function(t){return br?wr.createElement(t):{}},jr=Sr,$r=!$e&&!je((function(){return 7!==Object.defineProperty(jr("div"),"a",{get:function(){return 7}}).a})),Or=$e&&je((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),kr=gr,Er=String,Mr=TypeError,xr=function(t){if(kr(t))return t;throw new Mr(Er(t)+" is not an object")},Tr=Oe,Nr=Function.prototype.call,Pr=Tr?Nr.bind(Nr):function(){return Nr.apply(Nr,arguments)},Cr=Ze,Rr=Ke,Ir=function(t,n){return arguments.length<2?(e=Cr[t],Rr(e)?e:void 0):Cr[t]&&Cr[t][n];var e},Ar=Te({}.isPrototypeOf),Dr="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Lr=Ze,qr=Dr,Fr=Lr.process,_r=Lr.Deno,Ur=Fr&&Fr.versions||_r&&_r.version,zr=Ur&&Ur.v8;zr&&(sr=(ur=zr.split("."))[0]>0&&ur[0]<4?1:+(ur[0]+ur[1])),!sr&&qr&&(!(ur=qr.match(/Edge\/(\d+)/))||ur[1]>=74)&&(ur=qr.match(/Chrome\/(\d+)/))&&(sr=+ur[1]);var Wr=sr,Br=Wr,Gr=je,Hr=Ze.String,Vr=!!Object.getOwnPropertySymbols&&!Gr((function(){var t=Symbol("symbol detection");return!Hr(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Br&&Br<41})),Yr=Vr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Jr=Ir,Kr=Ke,Xr=Ar,Zr=Object,Qr=Yr?function(t){return"symbol"==typeof t}:function(t){var n=Jr("Symbol");return Kr(n)&&Xr(n.prototype,Zr(t))},to=String,no=function(t){try{return to(t)}catch(t){return"Object"}},eo=Ke,ro=no,oo=TypeError,io=function(t){if(eo(t))return t;throw new oo(ro(t)+" is not a function")},ao=io,co=Ne,uo=function(t,n){var e=t[n];return co(e)?void 0:ao(e)},so=Pr,lo=Ke,fo=gr,po=TypeError,ho={exports:{}},yo=or;(ho.exports=function(t,n){return yo[t]||(yo[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.34.0",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.34.0/LICENSE",source:"https://github.com/zloirock/core-js"});var go=ho.exports,vo=Te,mo=0,wo=Math.random(),bo=vo(1..toString),So=function(t){return"Symbol("+(void 0===t?"":t)+")_"+bo(++mo+wo,36)},jo=go,$o=Fe,Oo=So,ko=Vr,Eo=Yr,Mo=Ze.Symbol,xo=jo("wks"),To=Eo?Mo.for||Mo:Mo&&Mo.withoutSetter||Oo,No=function(t){return $o(xo,t)||(xo[t]=ko&&$o(Mo,t)?Mo[t]:To("Symbol."+t)),xo[t]},Po=Pr,Co=gr,Ro=Qr,Io=uo,Ao=function(t,n){var e,r;if("string"===n&&lo(e=t.toString)&&!fo(r=so(e,t)))return r;if(lo(e=t.valueOf)&&!fo(r=so(e,t)))return r;if("string"!==n&&lo(e=t.toString)&&!fo(r=so(e,t)))return r;throw new po("Can't convert object to primitive value")},Do=TypeError,Lo=No("toPrimitive"),qo=function(t,n){if(!Co(t)||Ro(t))return t;var e,r=Io(t,Lo);if(r){if(void 0===n&&(n="default"),e=Po(r,t,n),!Co(e)||Ro(e))return e;throw new Do("Can't convert object to primitive value")}return void 0===n&&(n="number"),Ao(t,n)},Fo=Qr,_o=function(t){var n=qo(t,"string");return Fo(n)?n:n+""},Uo=$e,zo=$r,Wo=Or,Bo=xr,Go=_o,Ho=TypeError,Vo=Object.defineProperty,Yo=Object.getOwnPropertyDescriptor,Jo="enumerable",Ko="configurable",Xo="writable";vr.f=Uo?Wo?function(t,n,e){if(Bo(t),n=Go(n),Bo(e),"function"==typeof t&&"prototype"===n&&"value"in e&&Xo in e&&!e[Xo]){var r=Yo(t,n);r&&r[Xo]&&(t[n]=e.value,e={configurable:Ko in e?e[Ko]:r[Ko],enumerable:Jo in e?e[Jo]:r[Jo],writable:!1})}return Vo(t,n,e)}:Vo:function(t,n,e){if(Bo(t),n=Go(n),Bo(e),zo)try{return Vo(t,n,e)}catch(t){}if("get"in e||"set"in e)throw new Ho("Accessors not supported");return"value"in e&&(t[n]=e.value),t};var Zo,Qo,ti,ni=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},ei=vr,ri=ni,oi=$e?function(t,n,e){return ei.f(t,n,ri(1,e))}:function(t,n,e){return t[n]=e,t},ii=So,ai=go("keys"),ci={},ui=dr,si=Ze,li=gr,fi=oi,pi=Fe,di=or,hi=function(t){return ai[t]||(ai[t]=ii(t))},yi=ci,gi="Object already initialized",vi=si.TypeError,mi=si.WeakMap;if(ui||di.state){var wi=di.state||(di.state=new mi);wi.get=wi.get,wi.has=wi.has,wi.set=wi.set,Zo=function(t,n){if(wi.has(t))throw new vi(gi);return n.facade=t,wi.set(t,n),n},Qo=function(t){return wi.get(t)||{}},ti=function(t){return wi.has(t)}}else{var bi=hi("state");yi[bi]=!0,Zo=function(t,n){if(pi(t,bi))throw new vi(gi);return n.facade=t,fi(t,bi,n),n},Qo=function(t){return pi(t,bi)?t[bi]:{}},ti=function(t){return pi(t,bi)}}var Si={set:Zo,get:Qo,has:ti,enforce:function(t){return ti(t)?Qo(t):Zo(t,{})},getterFor:function(t){return function(n){var e;if(!li(n)||(e=Qo(n)).type!==t)throw new vi("Incompatible receiver, "+t+" required");return e}}},ji=Te,$i=je,Oi=Ke,ki=Fe,Ei=$e,Mi=Ge.CONFIGURABLE,xi=lr,Ti=Si.enforce,Ni=Si.get,Pi=String,Ci=Object.defineProperty,Ri=ji("".slice),Ii=ji("".replace),Ai=ji([].join),Di=Ei&&!$i((function(){return 8!==Ci((function(){}),"length",{value:8}).length})),Li=String(String).split("String"),qi=He.exports=function(t,n,e){"Symbol("===Ri(Pi(n),0,7)&&(n="["+Ii(Pi(n),/^Symbol\(([^)]*)\)/,"$1")+"]"),e&&e.getter&&(n="get "+n),e&&e.setter&&(n="set "+n),(!ki(t,"name")||Mi&&t.name!==n)&&(Ei?Ci(t,"name",{value:n,configurable:!0}):t.name=n),Di&&e&&ki(e,"arity")&&t.length!==e.arity&&Ci(t,"length",{value:e.arity});try{e&&ki(e,"constructor")&&e.constructor?Ei&&Ci(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=Ti(t);return ki(r,"source")||(r.source=Ai(Li,"string"==typeof n?n:"")),t};Function.prototype.toString=qi((function(){return Oi(this)&&Ni(this).source||xi(this)}),"toString");var Fi=He.exports,_i=Fi,Ui=vr,zi=function(t,n,e){return e.get&&_i(e.get,n,{getter:!0}),e.set&&_i(e.set,n,{setter:!0}),Ui.f(t,n,e)},Wi=$e,Bi=Ge.EXISTS,Gi=Te,Hi=zi,Vi=Function.prototype,Yi=Gi(Vi.toString),Ji=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ki=Gi(Ji.exec);Wi&&!Bi&&Hi(Vi,"name",{configurable:!0,get:function(){try{return Ki(Ji,Yi(this))[1]}catch(t){return""}}});var Xi={},Zi={},Qi={}.propertyIsEnumerable,ta=Object.getOwnPropertyDescriptor,na=ta&&!Qi.call({1:2},1);Zi.f=na?function(t){var n=ta(this,t);return!!n&&n.enumerable}:Qi;var ea=Te,ra=ea({}.toString),oa=ea("".slice),ia=function(t){return oa(ra(t),8,-1)},aa=je,ca=ia,ua=Object,sa=Te("".split),la=aa((function(){return!ua("z").propertyIsEnumerable(0)}))?function(t){return"String"===ca(t)?sa(t,""):ua(t)}:ua,fa=la,pa=Re,da=function(t){return fa(pa(t))},ha=$e,ya=Pr,ga=Zi,va=ni,ma=da,wa=_o,ba=Fe,Sa=$r,ja=Object.getOwnPropertyDescriptor;Xi.f=ha?ja:function(t,n){if(t=ma(t),n=wa(n),Sa)try{return ja(t,n)}catch(t){}if(ba(t,n))return va(!ya(ga.f,t,n),t[n])};var $a=Ke,Oa=vr,ka=Fi,Ea=nr,Ma=function(t,n,e,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:n;if($a(e)&&ka(e,i,r),r.global)o?t[n]=e:Ea(n,e);else{try{r.unsafe?t[n]&&(o=!0):delete t[n]}catch(t){}o?t[n]=e:Oa.f(t,n,{value:e,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},xa={},Ta=Math.ceil,Na=Math.floor,Pa=Math.trunc||function(t){var n=+t;return(n>0?Na:Ta)(n)},Ca=function(t){var n=+t;return n!=n||0===n?0:Pa(n)},Ra=Ca,Ia=Math.max,Aa=Math.min,Da=Ca,La=Math.min,qa=function(t){return t>0?La(Da(t),9007199254740991):0},Fa=function(t){return qa(t.length)},_a=da,Ua=function(t,n){var e=Ra(t);return e<0?Ia(e+n,0):Aa(e,n)},za=Fa,Wa=function(t){return function(n,e,r){var o,i=_a(n),a=za(i),c=Ua(r,a);if(t&&e!=e){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===e)return t||c||0;return!t&&-1}},Ba={includes:Wa(!0),indexOf:Wa(!1)},Ga=Fe,Ha=da,Va=Ba.indexOf,Ya=ci,Ja=Te([].push),Ka=function(t,n){var e,r=Ha(t),o=0,i=[];for(e in r)!Ga(Ya,e)&&Ga(r,e)&&Ja(i,e);for(;n.length>o;)Ga(r,e=n[o++])&&(~Va(i,e)||Ja(i,e));return i},Xa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Za=Ka,Qa=Xa.concat("length","prototype");xa.f=Object.getOwnPropertyNames||function(t){return Za(t,Qa)};var tc={};tc.f=Object.getOwnPropertySymbols;var nc=Ir,ec=xa,rc=tc,oc=xr,ic=Te([].concat),ac=nc("Reflect","ownKeys")||function(t){var n=ec.f(oc(t)),e=rc.f;return e?ic(n,e(t)):n},cc=Fe,uc=ac,sc=Xi,lc=vr,fc=je,pc=Ke,dc=/#|\.prototype\./,hc=function(t,n){var e=gc[yc(t)];return e===mc||e!==vc&&(pc(n)?fc(n):!!n)},yc=hc.normalize=function(t){return String(t).replace(dc,".").toLowerCase()},gc=hc.data={},vc=hc.NATIVE="N",mc=hc.POLYFILL="P",wc=hc,bc=Ze,Sc=Xi.f,jc=oi,$c=Ma,Oc=nr,kc=function(t,n,e){for(var r=uc(n),o=lc.f,i=sc.f,a=0;a<r.length;a++){var c=r[a];cc(t,c)||e&&cc(e,c)||o(t,c,i(n,c))}},Ec=wc,Mc=function(t,n){var e,r,o,i,a,c=t.target,u=t.global,s=t.stat;if(e=u?bc:s?bc[c]||Oc(c,{}):(bc[c]||{}).prototype)for(r in n){if(i=n[r],o=t.dontCallGetSet?(a=Sc(e,r))&&a.value:e[r],!Ec(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;kc(i,o)}(t.sham||o&&o.sham)&&jc(i,"sham",!0),$c(e,r,i,t)}},xc=Ka,Tc=Xa,Nc=Object.keys||function(t){return xc(t,Tc)},Pc=$e,Cc=Te,Rc=Pr,Ic=je,Ac=Nc,Dc=tc,Lc=Zi,qc=De,Fc=la,_c=Object.assign,Uc=Object.defineProperty,zc=Cc([].concat),Wc=!_c||Ic((function(){if(Pc&&1!==_c({b:1},_c(Uc({},"a",{enumerable:!0,get:function(){Uc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},n={},e=Symbol("assign detection"),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach((function(t){n[t]=t})),7!==_c({},t)[e]||Ac(_c({},n)).join("")!==r}))?function(t,n){for(var e=qc(t),r=arguments.length,o=1,i=Dc.f,a=Lc.f;r>o;)for(var c,u=Fc(arguments[o++]),s=i?zc(Ac(u),i(u)):Ac(u),l=s.length,f=0;l>f;)c=s[f++],Pc&&!Rc(a,u,c)||(e[c]=u[c]);return e}:_c,Bc=Wc;Mc({target:"Object",stat:!0,arity:2,forced:Object.assign!==Bc},{assign:Bc});var Gc={};Gc[No("toStringTag")]="z";var Hc="[object z]"===String(Gc),Vc=Hc,Yc=Ke,Jc=ia,Kc=No("toStringTag"),Xc=Object,Zc="Arguments"===Jc(function(){return arguments}()),Qc=Vc?Jc:function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Xc(t),Kc))?e:Zc?Jc(n):"Object"===(r=Jc(n))&&Yc(n.callee)?"Arguments":r},tu=Qc,nu=Hc?{}.toString:function(){return"[object "+tu(this)+"]"};Hc||Ma(Object.prototype,"toString",nu,{unsafe:!0});var eu="process"===ia(Ze.process),ru=Te,ou=io,iu=Ke,au=String,cu=TypeError,uu=function(t,n,e){try{return ru(ou(Object.getOwnPropertyDescriptor(t,n)[e]))}catch(t){}},su=xr,lu=function(t){if("object"==typeof t||iu(t))return t;throw new cu("Can't set "+au(t)+" as a prototype")},fu=Object.setPrototypeOf||("__proto__"in{}?function(){var t,n=!1,e={};try{(t=uu(Object.prototype,"__proto__","set"))(e,[]),n=e instanceof Array}catch(t){}return function(e,r){return su(e),lu(r),n?t(e,r):e.__proto__=r,e}}():void 0),pu=vr.f,du=Fe,hu=No("toStringTag"),yu=Ir,gu=zi,vu=$e,mu=No("species"),wu=Ar,bu=TypeError,Su=Te,ju=je,$u=Ke,Ou=Qc,ku=lr,Eu=function(){},Mu=[],xu=Ir("Reflect","construct"),Tu=/^\s*(?:class|function)\b/,Nu=Su(Tu.exec),Pu=!Tu.test(Eu),Cu=function(t){if(!$u(t))return!1;try{return xu(Eu,Mu,t),!0}catch(t){return!1}},Ru=function(t){if(!$u(t))return!1;switch(Ou(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Pu||!!Nu(Tu,ku(t))}catch(t){return!0}};Ru.sham=!0;var Iu,Au,Du,Lu,qu=!xu||ju((function(){var t;return Cu(Cu.call)||!Cu(Object)||!Cu((function(){t=!0}))||t}))?Ru:Cu,Fu=qu,_u=no,Uu=TypeError,zu=xr,Wu=function(t){if(Fu(t))return t;throw new Uu(_u(t)+" is not a constructor")},Bu=Ne,Gu=No("species"),Hu=Oe,Vu=Function.prototype,Yu=Vu.apply,Ju=Vu.call,Ku="object"==typeof Reflect&&Reflect.apply||(Hu?Ju.bind(Yu):function(){return Ju.apply(Yu,arguments)}),Xu=ia,Zu=Te,Qu=function(t){if("Function"===Xu(t))return Zu(t)},ts=io,ns=Oe,es=Qu(Qu.bind),rs=function(t,n){return ts(t),void 0===n?t:ns?es(t,n):function(){return t.apply(n,arguments)}},os=Ir("document","documentElement"),is=Te([].slice),as=TypeError,cs=/(?:ipad|iphone|ipod).*applewebkit/i.test(Dr),us=Ze,ss=Ku,ls=rs,fs=Ke,ps=Fe,ds=je,hs=os,ys=is,gs=Sr,vs=function(t,n){if(t<n)throw new as("Not enough arguments");return t},ms=cs,ws=eu,bs=us.setImmediate,Ss=us.clearImmediate,js=us.process,$s=us.Dispatch,Os=us.Function,ks=us.MessageChannel,Es=us.String,Ms=0,xs={},Ts="onreadystatechange";ds((function(){Iu=us.location}));var Ns=function(t){if(ps(xs,t)){var n=xs[t];delete xs[t],n()}},Ps=function(t){return function(){Ns(t)}},Cs=function(t){Ns(t.data)},Rs=function(t){us.postMessage(Es(t),Iu.protocol+"//"+Iu.host)};bs&&Ss||(bs=function(t){vs(arguments.length,1);var n=fs(t)?t:Os(t),e=ys(arguments,1);return xs[++Ms]=function(){ss(n,void 0,e)},Au(Ms),Ms},Ss=function(t){delete xs[t]},ws?Au=function(t){js.nextTick(Ps(t))}:$s&&$s.now?Au=function(t){$s.now(Ps(t))}:ks&&!ms?(Lu=(Du=new ks).port2,Du.port1.onmessage=Cs,Au=ls(Lu.postMessage,Lu)):us.addEventListener&&fs(us.postMessage)&&!us.importScripts&&Iu&&"file:"!==Iu.protocol&&!ds(Rs)?(Au=Rs,us.addEventListener("message",Cs,!1)):Au=Ts in gs("script")?function(t){hs.appendChild(gs("script"))[Ts]=function(){hs.removeChild(this),Ns(t)}}:function(t){setTimeout(Ps(t),0)});var Is={set:bs,clear:Ss},As=function(){this.head=null,this.tail=null};As.prototype={add:function(t){var n={item:t,next:null},e=this.tail;e?e.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var Ds,Ls,qs,Fs,_s,Us=As,zs=/ipad|iphone|ipod/i.test(Dr)&&"undefined"!=typeof Pebble,Ws=/web0s(?!.*chrome)/i.test(Dr),Bs=Ze,Gs=rs,Hs=Xi.f,Vs=Is.set,Ys=Us,Js=cs,Ks=zs,Xs=Ws,Zs=eu,Qs=Bs.MutationObserver||Bs.WebKitMutationObserver,tl=Bs.document,nl=Bs.process,el=Bs.Promise,rl=Hs(Bs,"queueMicrotask"),ol=rl&&rl.value;if(!ol){var il=new Ys,al=function(){var t,n;for(Zs&&(t=nl.domain)&&t.exit();n=il.get();)try{n()}catch(t){throw il.head&&Ds(),t}t&&t.enter()};Js||Zs||Xs||!Qs||!tl?!Ks&&el&&el.resolve?((Fs=el.resolve(void 0)).constructor=el,_s=Gs(Fs.then,Fs),Ds=function(){_s(al)}):Zs?Ds=function(){nl.nextTick(al)}:(Vs=Gs(Vs,Bs),Ds=function(){Vs(al)}):(Ls=!0,qs=tl.createTextNode(""),new Qs(al).observe(qs,{characterData:!0}),Ds=function(){qs.data=Ls=!Ls}),ol=function(t){il.head||Ds(),il.add(t)}}var cl=ol,ul=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},sl=Ze.Promise,ll="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,fl=!ll&&!eu&&"object"==typeof window&&"object"==typeof document,pl=Ze,dl=sl,hl=Ke,yl=wc,gl=lr,vl=No,ml=fl,wl=ll,bl=Wr;dl&&dl.prototype;var Sl=vl("species"),jl=!1,$l=hl(pl.PromiseRejectionEvent),Ol=yl("Promise",(function(){var t=gl(dl),n=t!==String(dl);if(!n&&66===bl)return!0;if(!bl||bl<51||!/native code/.test(t)){var e=new dl((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((e.constructor={})[Sl]=r,!(jl=e.then((function(){}))instanceof r))return!0}return!n&&(ml||wl)&&!$l})),kl={CONSTRUCTOR:Ol,REJECTION_EVENT:$l,SUBCLASSING:jl},El={},Ml=io,xl=TypeError,Tl=function(t){var n,e;this.promise=new t((function(t,r){if(void 0!==n||void 0!==e)throw new xl("Bad Promise constructor");n=t,e=r})),this.resolve=Ml(n),this.reject=Ml(e)};El.f=function(t){return new Tl(t)};var Nl,Pl,Cl,Rl=Mc,Il=eu,Al=Ze,Dl=Pr,Ll=Ma,ql=fu,Fl=function(t,n,e){t&&!e&&(t=t.prototype),t&&!du(t,hu)&&pu(t,hu,{configurable:!0,value:n})},_l=function(t){var n=yu(t);vu&&n&&!n[mu]&&gu(n,mu,{configurable:!0,get:function(){return this}})},Ul=io,zl=Ke,Wl=gr,Bl=function(t,n){if(wu(n,t))return t;throw new bu("Incorrect invocation")},Gl=function(t,n){var e,r=zu(t).constructor;return void 0===r||Bu(e=zu(r)[Gu])?n:Wu(e)},Hl=Is.set,Vl=cl,Yl=function(t,n){try{1===arguments.length?console.error(t):console.error(t,n)}catch(t){}},Jl=ul,Kl=Us,Xl=Si,Zl=sl,Ql=El,tf="Promise",nf=kl.CONSTRUCTOR,ef=kl.REJECTION_EVENT,rf=kl.SUBCLASSING,of=Xl.getterFor(tf),af=Xl.set,cf=Zl&&Zl.prototype,uf=Zl,sf=cf,lf=Al.TypeError,ff=Al.document,pf=Al.process,df=Ql.f,hf=df,yf=!!(ff&&ff.createEvent&&Al.dispatchEvent),gf="unhandledrejection",vf=function(t){var n;return!(!Wl(t)||!zl(n=t.then))&&n},mf=function(t,n){var e,r,o,i=n.value,a=1===n.state,c=a?t.ok:t.fail,u=t.resolve,s=t.reject,l=t.domain;try{c?(a||(2===n.rejection&&$f(n),n.rejection=1),!0===c?e=i:(l&&l.enter(),e=c(i),l&&(l.exit(),o=!0)),e===t.promise?s(new lf("Promise-chain cycle")):(r=vf(e))?Dl(r,e,u,s):u(e)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},wf=function(t,n){t.notified||(t.notified=!0,Vl((function(){for(var e,r=t.reactions;e=r.get();)mf(e,t);t.notified=!1,n&&!t.rejection&&Sf(t)})))},bf=function(t,n,e){var r,o;yf?((r=ff.createEvent("Event")).promise=n,r.reason=e,r.initEvent(t,!1,!0),Al.dispatchEvent(r)):r={promise:n,reason:e},!ef&&(o=Al["on"+t])?o(r):t===gf&&Yl("Unhandled promise rejection",e)},Sf=function(t){Dl(Hl,Al,(function(){var n,e=t.facade,r=t.value;if(jf(t)&&(n=Jl((function(){Il?pf.emit("unhandledRejection",r,e):bf(gf,e,r)})),t.rejection=Il||jf(t)?2:1,n.error))throw n.value}))},jf=function(t){return 1!==t.rejection&&!t.parent},$f=function(t){Dl(Hl,Al,(function(){var n=t.facade;Il?pf.emit("rejectionHandled",n):bf("rejectionhandled",n,t.value)}))},Of=function(t,n,e){return function(r){t(n,r,e)}},kf=function(t,n,e){t.done||(t.done=!0,e&&(t=e),t.value=n,t.state=2,wf(t,!0))},Ef=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw new lf("Promise can't be resolved itself");var r=vf(n);r?Vl((function(){var e={done:!1};try{Dl(r,n,Of(Ef,e,t),Of(kf,e,t))}catch(n){kf(e,n,t)}})):(t.value=n,t.state=1,wf(t,!1))}catch(n){kf({done:!1},n,t)}}};if(nf&&(sf=(uf=function(t){Bl(this,sf),Ul(t),Dl(Nl,this);var n=of(this);try{t(Of(Ef,n),Of(kf,n))}catch(t){kf(n,t)}}).prototype,(Nl=function(t){af(this,{type:tf,done:!1,notified:!1,parent:!1,reactions:new Kl,rejection:!1,state:0,value:void 0})}).prototype=Ll(sf,"then",(function(t,n){var e=of(this),r=df(Gl(this,uf));return e.parent=!0,r.ok=!zl(t)||t,r.fail=zl(n)&&n,r.domain=Il?pf.domain:void 0,0===e.state?e.reactions.add(r):Vl((function(){mf(r,e)})),r.promise})),Pl=function(){var t=new Nl,n=of(t);this.promise=t,this.resolve=Of(Ef,n),this.reject=Of(kf,n)},Ql.f=df=function(t){return t===uf||undefined===t?new Pl(t):hf(t)},zl(Zl)&&cf!==Object.prototype)){Cl=cf.then,rf||Ll(cf,"then",(function(t,n){var e=this;return new uf((function(t,n){Dl(Cl,e,t,n)})).then(t,n)}),{unsafe:!0});try{delete cf.constructor}catch(t){}ql&&ql(cf,sf)}Rl({global:!0,constructor:!0,wrap:!0,forced:nf},{Promise:uf}),Fl(uf,tf,!1),_l(tf);var Mf={},xf=Mf,Tf=No("iterator"),Nf=Array.prototype,Pf=Qc,Cf=uo,Rf=Ne,If=Mf,Af=No("iterator"),Df=function(t){if(!Rf(t))return Cf(t,Af)||Cf(t,"@@iterator")||If[Pf(t)]},Lf=Pr,qf=io,Ff=xr,_f=no,Uf=Df,zf=TypeError,Wf=Pr,Bf=xr,Gf=uo,Hf=rs,Vf=Pr,Yf=xr,Jf=no,Kf=function(t){return void 0!==t&&(xf.Array===t||Nf[Tf]===t)},Xf=Fa,Zf=Ar,Qf=function(t,n){var e=arguments.length<2?Uf(t):n;if(qf(e))return Ff(Lf(e,t));throw new zf(_f(t)+" is not iterable")},tp=Df,np=function(t,n,e){var r,o;Bf(t);try{if(!(r=Gf(t,"return"))){if("throw"===n)throw e;return e}r=Wf(r,t)}catch(t){o=!0,r=t}if("throw"===n)throw e;if(o)throw r;return Bf(r),e},ep=TypeError,rp=function(t,n){this.stopped=t,this.result=n},op=rp.prototype,ip=function(t,n,e){var r,o,i,a,c,u,s,l=e&&e.that,f=!(!e||!e.AS_ENTRIES),p=!(!e||!e.IS_RECORD),d=!(!e||!e.IS_ITERATOR),h=!(!e||!e.INTERRUPTED),y=Hf(n,l),g=function(t){return r&&np(r,"normal",t),new rp(!0,t)},v=function(t){return f?(Yf(t),h?y(t[0],t[1],g):y(t[0],t[1])):h?y(t,g):y(t)};if(p)r=t.iterator;else if(d)r=t;else{if(!(o=tp(t)))throw new ep(Jf(t)+" is not iterable");if(Kf(o)){for(i=0,a=Xf(t);a>i;i++)if((c=v(t[i]))&&Zf(op,c))return c;return new rp(!1)}r=Qf(t,o)}for(u=p?t.next:r.next;!(s=Vf(u,r)).done;){try{c=v(s.value)}catch(t){np(r,"throw",t)}if("object"==typeof c&&c&&Zf(op,c))return c}return new rp(!1)},ap=No("iterator"),cp=!1;try{var up=0,sp={next:function(){return{done:!!up++}},return:function(){cp=!0}};sp[ap]=function(){return this},Array.from(sp,(function(){throw 2}))}catch(t){}var lp=sl,fp=function(t,n){try{if(!n&&!cp)return!1}catch(t){return!1}var e=!1;try{var r={};r[ap]=function(){return{next:function(){return{done:e=!0}}}},t(r)}catch(t){}return e},pp=kl.CONSTRUCTOR||!fp((function(t){lp.all(t).then(void 0,(function(){}))})),dp=Pr,hp=io,yp=El,gp=ul,vp=ip;Mc({target:"Promise",stat:!0,forced:pp},{all:function(t){var n=this,e=yp.f(n),r=e.resolve,o=e.reject,i=gp((function(){var e=hp(n.resolve),i=[],a=0,c=1;vp(t,(function(t){var u=a++,s=!1;c++,dp(e,n,t).then((function(t){s||(s=!0,i[u]=t,--c||r(i))}),o)})),--c||r(i)}));return i.error&&o(i.value),e.promise}});var mp=Mc,wp=kl.CONSTRUCTOR,bp=sl,Sp=Ir,jp=Ke,$p=Ma,Op=bp&&bp.prototype;if(mp({target:"Promise",proto:!0,forced:wp,real:!0},{catch:function(t){return this.then(void 0,t)}}),jp(bp)){var kp=Sp("Promise").prototype.catch;Op.catch!==kp&&$p(Op,"catch",kp,{unsafe:!0})}var Ep=Pr,Mp=io,xp=El,Tp=ul,Np=ip;Mc({target:"Promise",stat:!0,forced:pp},{race:function(t){var n=this,e=xp.f(n),r=e.reject,o=Tp((function(){var o=Mp(n.resolve);Np(t,(function(t){Ep(o,n,t).then(e.resolve,r)}))}));return o.error&&r(o.value),e.promise}});var Pp=Pr,Cp=El;Mc({target:"Promise",stat:!0,forced:kl.CONSTRUCTOR},{reject:function(t){var n=Cp.f(this);return Pp(n.reject,void 0,t),n.promise}});var Rp=xr,Ip=gr,Ap=El,Dp=Mc,Lp=kl.CONSTRUCTOR,qp=function(t,n){if(Rp(t),Ip(n)&&n.constructor===t)return n;var e=Ap.f(t);return(0,e.resolve)(n),e.promise};function Fp(t){return null!=t&&!Number.isNaN(t)}function _p(t,e){return+Fp(e)-+Fp(t)||n(t,e)}function Up(t){return isFinite(t)?t:NaN}function zp(t){return t>0&&isFinite(t)?t:NaN}function Wp(t){return t<0&&isFinite(t)?t:NaN}function Bp(t,n){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof n?n(t):n;const e=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return`${a=t.getUTCFullYear(),a<0?`-${Gp(-a,6)}`:a>9999?`+${Gp(a,6)}`:Gp(a,4)}-${Gp(t.getUTCMonth()+1,2)}-${Gp(t.getUTCDate(),2)}${e||r||o||i?`T${Gp(e,2)}:${Gp(r,2)}${o||i?`:${Gp(o,2)}${i?`.${Gp(i,3)}`:""}`:""}Z`:""}`;var a}function Gp(t,n){return`${t}`.padStart(n,"0")}Ir("Promise"),Dp({target:"Promise",stat:!0,forced:Lp},{resolve:function(t){return qp(this,t)}});const Hp=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Vp(t,n){return Hp.test(t+="")?new Date(t):"function"==typeof n?n(t):n}const Yp=new Map([["second",e],["minute",r],["hour",o],["day",i],["week",a],["month",c],["quarter",c.every(3)],["half",c.every(6)],["year",u],["monday",s],["tuesday",l],["wednesday",f],["thursday",p],["friday",d],["saturday",h],["sunday",y]]),Jp=new Map([["second",g],["minute",v],["hour",m],["day",w],["week",b],["month",S],["quarter",S.every(3)],["half",S.every(6)],["year",j],["monday",$],["tuesday",O],["wednesday",k],["thursday",E],["friday",M],["saturday",x],["sunday",T]]);function Kp(t){const n=Yp.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown interval: ${t}`);return n}function Xp(t){const n=Jp.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown interval: ${t}`);return n}const Zp=Object.getPrototypeOf(Uint8Array),Qp=Object.prototype.toString,td=t=>null==t?t:`${t}`,nd=t=>()=>t;function ed(t){return t instanceof Zp?t:sd(t,rd,Float64Array)}function rd(t){return null==t?NaN:Number(t)}function od(t){return sd(t,id)}function id(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?Vp(t):null==t||isNaN(t=+t)?void 0:new Date(t)}function ad(t,n){return void 0===t&&(t=n),null===t?[void 0,"none"]:function(t){return"string"==typeof t&&(t=t.toLowerCase().trim(),"none"===t||"currentcolor"===t||t.startsWith("url(")&&t.endsWith(")")||t.startsWith("var(")&&t.endsWith(")")||null!==N(t))}(t)?[void 0,t]:[t,void 0]}function cd(t,n){return void 0===t&&(t=n),null===t||"number"==typeof t?[void 0,t]:[t,void 0]}function ud(t){return null==t||t instanceof Array||t instanceof Zp?t:Array.from(t)}function sd(t,n,e=Array){return null==t?t:t instanceof e?t.map(n):e.from(t,n)}function ld(t){return t?.toString===Qp}function fd(t){return ld(t)&&(void 0!==t.type||void 0!==t.domain)}function pd(t,n){if(null!=t){if("number"==typeof t){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:t=>Math.floor(t*n)/n,offset:t=>(t*n+1)/n,range:(t,e)=>C(Math.ceil(t*n),e*n).map((t=>t/n))}:{floor:t=>Math.floor(t/n)*n,offset:t=>t+n,range:(t,e)=>C(Math.ceil(t/n),e/n).map((t=>t*n))}}if("string"==typeof t)return("time"===n?Kp:Xp)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function dd(t,n){if((t=pd(t,n))&&"function"!=typeof t.range)throw new Error("invalid interval: missing range method");return t}function hd(t){for(const n of t){if(null==n)continue;const t=typeof n;return"string"===t||"boolean"===t}}function yd(t){for(const n of t)if(null!=n)return n instanceof Date}function gd(t){for(const n of t)if(null!=n)return"string"==typeof n&&isNaN(n)&&Vp(n)}function vd(t){for(const n of t)if(null!=n){if("string"!=typeof n)return!1;if(n.trim())return!isNaN(n)}}function md(t){return null==t||function(t){return/^\s*none\s*$/i.test(t)}(t)}function wd(t){if(null==t)return;const n=t[0],e=t[t.length-1];return P(n,e)}const bd=Symbol("position"),Sd=Symbol("color"),jd=Symbol("radius"),$d=Symbol("length"),Od=Symbol("opacity"),kd=Symbol("symbol"),Ed=new Map([["x",bd],["y",bd],["fx",bd],["fy",bd],["r",jd],["color",Sd],["opacity",Od],["symbol",kd],["length",$d]]),Md=2/Math.sqrt(3),xd=new Map([["asterisk",R],["circle",I],["cross",A],["diamond",D],["diamond2",L],["hexagon",{draw(t,n){const e=Math.sqrt(n/Math.PI),r=e*Md,o=r/2;t.moveTo(0,r),t.lineTo(e,o),t.lineTo(e,-o),t.lineTo(0,-r),t.lineTo(-e,-o),t.lineTo(-e,o),t.closePath()}}],["plus",q],["square",F],["square2",_],["star",U],["times",z],["triangle",W],["triangle2",B],["wye",G]]);function Td(t){if(null==t||function(t){return t&&"function"==typeof t.draw}(t))return t;const n=xd.get(`${t}`.toLowerCase());if(n)return n;throw new Error(`invalid symbol: ${t}`)}function Nd(t){console.warn(t)}const Pd=Math.PI,Cd=2*Pd;function Rd({projection:t,inset:n=0,insetTop:e=n,insetRight:r=n,insetBottom:o=n,insetLeft:i=n}={},a){if(null==t)return;if("function"==typeof t.stream)return t;let c,u,s="frame";if(ld(t)){let n;if(({type:t,domain:u,inset:n,insetTop:e=(void 0!==n?n:e),insetRight:r=(void 0!==n?n:r),insetBottom:o=(void 0!==n?n:o),insetLeft:i=(void 0!==n?n:i),clip:s=s,...c}=t),null==t)return}"function"!=typeof t&&({type:t}=function(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Id(ot,.7463,.4673);case"albers":return Ad(ut,.7463,.4673);case"azimuthal-equal-area":return Id(rt,4,4);case"azimuthal-equidistant":return Id(et,Cd,Cd);case"conic-conformal":return Ad(ct,Cd,Cd);case"conic-equal-area":return Ad(at,6.1702,2.9781);case"conic-equidistant":return Ad(it,7.312,3.6282);case"equal-earth":return Id(nt,5.4133,2.6347);case"equirectangular":return Id(tt,Cd,Pd);case"gnomonic":return Id(Q,3.4641,3.4641);case"identity":return{type:Dd};case"reflect-y":return{type:Ld};case"mercator":return Id(Z,Cd,Cd);case"orthographic":return Id(X,2,2);case"stereographic":return Id(K,2,2);case"transverse-mercator":return Id(J,Cd,Cd);default:throw new Error(`unknown projection type: ${t}`)}}(t));const{width:l,height:f,marginLeft:p,marginRight:d,marginTop:h,marginBottom:y}=a,g=l-p-d-i-r,v=f-h-y-e-o;if(t=t?.({width:g,height:v,clip:s,...c}),null==t)return;s=function(t,n,e,r,o){if(!1===t||null==t||"number"==typeof t)return t=>t;!0===t&&(t="frame");if("frame"===`${t}`.toLowerCase())return Y(n,e,r,o);throw new Error(`unknown projection clip type: ${t}`)}(s,p,h,l-d,f-y);let m,w=p+i,b=h+e;if(null!=u){const[[n,e],[r,o]]=H(t).bounds(u),i=Math.min(g/(r-n),v/(o-e));i>0?(w-=(i*(n+r)-g)/2,b-=(i*(e+o)-v)/2,m=V({point(t,n){this.stream.point(t*i+w,n*i+b)}})):Nd("Warning: the projection could not be fit to the specified domain; using the default scale.")}return m??=0===w&&0===b?Dd():V({point(t,n){this.stream.point(t+w,n+b)}}),{stream:n=>t.stream(m.stream(s(n)))}}function Id(t,n,e){return{type:({width:r,height:o,rotate:i,precision:a=.15,clip:c})=>{const u=t();return null!=a&&u.precision?.(a),null!=i&&u.rotate?.(i),"number"==typeof c&&u.clipAngle?.(c),u.scale(Math.min(r/n,o/e)),u.translate([r/2,o/2]),u},aspectRatio:e/n}}function Ad(t,n,e){const{type:r,aspectRatio:o}=Id(t,n,e);return{type:t=>{const{parallels:n,domain:e,width:o,height:i}=t,a=r(t);return null!=n&&(a.parallels(n),void 0===e&&a.fitSize([o,i],{type:"Sphere"})),a},aspectRatio:o}}const Dd=nd({stream:t=>t}),Ld=nd(V({point(t,n){this.stream.point(t,-n)}}));function qd(t={},n,e){const{document:r=("undefined"!=typeof window?window.document:void 0)}=t;return{document:r,className:e,projection:Rd(t,n)}}function Fd(t,{document:n}){return st(lt(t).call(n.documentElement))}const _d=new Map([["accent",ft],["category10",pt],["dark2",dt],["paired",ht],["pastel1",yt],["pastel2",gt],["set1",vt],["set2",mt],["set3",wt],["tableau10",bt],["brbg",zd(cn,jt)],["prgn",zd(un,$t)],["piyg",zd(sn,Ot)],["puor",zd(ln,kt)],["rdbu",zd(fn,Et)],["rdgy",zd(pn,Mt)],["rdylbu",zd(dn,xt)],["rdylgn",zd(hn,Tt)],["spectral",zd(yn,Nt)],["burd",Wd(fn,Et)],["buylrd",Wd(dn,xt)],["blues",Ud(gn,Pt)],["greens",Ud(vn,Ct)],["greys",Ud(mn,Rt)],["oranges",Ud(wn,Dt)],["purples",Ud(bn,It)],["reds",Ud(Sn,At)],["turbo",Bd(Lt)],["viridis",Bd(qt)],["magma",Bd(Ft)],["inferno",Bd(_t)],["plasma",Bd(Ut)],["cividis",Bd(zt)],["cubehelix",Bd(Wt)],["warm",Bd(Bt)],["cool",Bd(Gt)],["bugn",Ud(jn,Ht)],["bupu",Ud($n,Vt)],["gnbu",Ud(On,Yt)],["orrd",Ud(kn,Jt)],["pubu",Ud(En,Xt)],["pubugn",Ud(Mn,Kt)],["purd",Ud(xn,Zt)],["rdpu",Ud(Tn,Qt)],["ylgn",Ud(Nn,nn)],["ylgnbu",Ud(Pn,tn)],["ylorbr",Ud(Cn,en)],["ylorrd",Ud(Rn,rn)],["rainbow",Gd(on)],["sinebow",Gd(an)]]);function Ud(t,n){return({length:e})=>1===e?[t[3][1]]:2===e?[t[3][1],t[3][2]]:(e=Math.max(3,Math.floor(e)))>9?St(n,e):t[e]}function zd(t,n){return({length:e})=>2===e?[t[3][0],t[3][2]]:(e=Math.max(3,Math.floor(e)))>11?St(n,e):t[e]}function Wd(t,n){return({length:e})=>2===e?[t[3][2],t[3][0]]:(e=Math.max(3,Math.floor(e)))>11?St((t=>n(1-t)),e):t[e].slice().reverse()}function Bd(t){return({length:n})=>St(t,Math.max(2,Math.floor(n)))}function Gd(t){return({length:n})=>St(t,Math.floor(n)+1).slice(0,-1)}function Hd(t){const n=`${t}`.toLowerCase();if(!_d.has(n))throw new Error(`unknown ordinal scheme: ${n}`);return _d.get(n)}function Vd(t,n){const e=Hd(t),r="function"==typeof e?e({length:n}):e;return r.length!==n?r.slice(0,n):r}const Yd=new Map([["brbg",jt],["prgn",$t],["piyg",Ot],["puor",kt],["rdbu",Et],["rdgy",Mt],["rdylbu",xt],["rdylgn",Tt],["spectral",Nt],["burd",t=>Et(1-t)],["buylrd",t=>xt(1-t)],["blues",Pt],["greens",Ct],["greys",Rt],["purples",It],["reds",At],["oranges",Dt],["turbo",Lt],["viridis",qt],["magma",Ft],["inferno",_t],["plasma",Ut],["cividis",zt],["cubehelix",Wt],["warm",Bt],["cool",Gt],["bugn",Ht],["bupu",Vt],["gnbu",Yt],["orrd",Jt],["pubugn",Kt],["pubu",Xt],["purd",Zt],["rdpu",Qt],["ylgnbu",tn],["ylgn",nn],["ylorbr",en],["ylorrd",rn],["rainbow",on],["sinebow",an]]);function Jd(t){const n=`${t}`.toLowerCase();if(!Yd.has(n))throw new Error(`unknown quantitative scheme: ${n}`);return Yd.get(n)}const Kd=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Xd(t){return null!=t&&Kd.has(`${t}`.toLowerCase())}const Zd=t=>n=>t(1-n),Qd=[0,1],th=new Map([["number",Un],["rgb",Hn],["hsl",Xn],["hcl",Zn],["lab",Qn]]);function nh(t){const n=`${t}`.toLowerCase();if(!th.has(n))throw new Error(`unknown interpolator: ${n}`);return th.get(n)}function eh(t,n,e,{type:r,nice:o,clamp:i,zero:a,domain:c=ah(t,e),unknown:u,round:s,scheme:l,interval:f,range:p=(Ed.get(t)===jd?uh(e,c):Ed.get(t)===$d?sh(e,c):Ed.get(t)===Od?Qd:void 0),interpolate:d=(Ed.get(t)===Sd?null==l&&void 0!==p?Hn:Jd(void 0!==l?l:"cyclical"===r?"rainbow":"turbo"):s?Vn:Un),reverse:h}){if(f=dd(f,r),"cyclical"!==r&&"sequential"!==r||(r="linear"),h=!!h,"function"!=typeof d&&(d=nh(d)),1===d.length?(h&&(d=Zd(d),h=!1),void 0===p&&2===(p=Float64Array.from(c,((t,n)=>n/(c.length-1)))).length&&(p=Qd),n.interpolate((p===Qd?nd:ph)(d))):n.interpolate(d),a){const[t,n]=Fn(c);(t>0||n<0)&&(c=function(t,n=Array){return t instanceof n?t.slice():n.from(t)}(c),wd(c)!==Math.sign(t)?c[c.length-1]=0:c[0]=0)}return h&&(c=zn(c)),n.domain(c).unknown(u),o&&(n.nice(function(t,n){return!0===t?void 0:"number"==typeof t?t:function(t,n){if((t=dd(t,n))&&"function"!=typeof t.ceil)throw new Error("invalid interval: missing ceil method");return t}(t,n)}(o,r)),c=n.domain()),void 0!==p&&n.range(p),i&&n.clamp(i),{type:r,domain:c,range:p,scale:n,interpolate:d,interval:f}}function rh(t,n,{exponent:e=1,...r}){return eh(t,An().exponent(e),n,{...r,type:"pow"})}function oh(t,n,{domain:e=[0],unknown:r,scheme:o="rdylbu",interpolate:i,range:a=(void 0!==i?St(i,e.length+1):Ed.get(t)===Sd?Vd(o,e.length+1):void 0),reverse:c}){const u=wd(e=ud(e));if(!isNaN(u)&&!function(t,n){for(let e=1,r=t.length,o=t[0];e<r;++e){const r=P(o,o=t[e]);if(0!==r&&r!==n)return!1}return!0}(e,u))throw new Error(`the ${t} scale has a non-monotonic domain`);return c&&(a=zn(a)),{type:"threshold",scale:Wn(u<0?zn(e):e,void 0===a?[]:a).unknown(r),domain:e,range:a}}function ih(t,n=Up){return t.length?[Yn(t,(({value:t})=>void 0===t?t:Yn(t,n))),Gn(t,(({value:t})=>void 0===t?t:Gn(t,n)))]:[0,1]}function ah(t,n){const e=Ed.get(t);return(e===jd||e===Od||e===$d?ch:ih)(n)}function ch(t){return[0,t.length?Gn(t,(({value:t})=>void 0===t?t:Gn(t,Up))):1]}function uh(t,n){const e=t.find((({radius:t})=>void 0!==t));if(void 0!==e)return[0,e.radius];const r=Jn(t,.5,(({value:t})=>void 0===t?NaN:Jn(t,.25,zp))),o=n.map((t=>3*Math.sqrt(t/r))),i=30/Gn(o);return i<1?o.map((t=>t*i)):o}function sh(t,n){const e=Kn(t,(({value:t})=>void 0===t?NaN:Kn(t,Math.abs))),r=n.map((t=>12*t/e)),o=60/Gn(r);return o<1?r.map((t=>t*o)):r}function lh(t){for(const{value:n}of t)if(void 0!==n)for(let e of n){if(e>0)return ih(t,zp);if(e<0)return ih(t,Wp)}return[1,10]}function fh(t){const n=[];for(const{value:e}of t)if(void 0!==e)for(const t of e)n.push(t);return n}function ph(t){return(n,e)=>r=>t(n+r*(e-n))}function dh(t,n,e,r,{type:o,nice:i,clamp:a,domain:c=ih(r),unknown:u,pivot:s=0,scheme:l,range:f,symmetric:p=!0,interpolate:d=(Ed.get(t)===Sd?null==l&&void 0!==f?Hn:Jd(void 0!==l?l:"rdbu"):Un),reverse:h}){s=+s;let[y,g]=c;if(P(y,g)<0&&([y,g]=[g,y],h=!h),y=Math.min(y,s),g=Math.max(g,s),"function"!=typeof d&&(d=nh(d)),void 0!==f&&(d=1===d.length?ph(d)(...f):oe(d,f)),h&&(d=Zd(d)),p){const t=e.apply(s),n=t-e.apply(y),r=e.apply(g)-t;n<r?y=e.invert(t-r):n>r&&(g=e.invert(t+n))}return n.domain([y,s,g]).unknown(u).interpolator(d),a&&n.clamp(a),i&&n.nice(i),{type:o,domain:[y,g],pivot:s,interpolate:d,scale:n}}function hh(t,n,{exponent:e=1,...r}){return dh(t,ne().exponent(e=+e),function(t){return.5===t?mh:{apply:n=>Math.sign(n)*Math.pow(Math.abs(n),t),invert:n=>Math.sign(n)*Math.pow(Math.abs(n),1/t)}}(e),n,{...r,type:"diverging-pow"})}function yh(t,n,{constant:e=1,...r}){return dh(t,re().constant(e=+e),function(t){return{apply:n=>Math.sign(n)*Math.log1p(Math.abs(n/t)),invert:n=>Math.sign(n)*Math.expm1(Math.abs(n))*t}}(e),n,r)}const gh={apply:t=>t,invert:t=>t},vh={apply:Math.log,invert:Math.exp},mh={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function wh(t,n,e,r){return eh(t,n,e,r)}const bh=Symbol("ordinal");function Sh(t,n,e,{type:r,interval:o,domain:i,range:a,reverse:c,hint:u}){return o=dd(o,r),void 0===i&&(i=Oh(e,o,t)),"categorical"!==r&&r!==bh||(r="ordinal"),c&&(i=zn(i)),n.domain(i),void 0!==a&&("function"==typeof a&&(a=a(i)),n.range(a)),{type:r,domain:i,range:a,scale:n,hint:u,interval:o}}function jh(t,n,{type:e,interval:r,domain:o,range:i,scheme:a,unknown:c,...u}){let s;if(r=dd(r,e),void 0===o&&(o=Oh(n,r,t)),Ed.get(t)===kd)s=function(t){return{fill:kh(t,"fill"),stroke:kh(t,"stroke")}}(n),i=void 0===i?function(t){return md(t.fill)?de:he}(s):sd(i,Td);else if(Ed.get(t)===Sd&&(void 0!==i||"ordinal"!==e&&e!==bh||(i=function(t,n="greys"){const e=new Set,[r,o]=Vd(n,2);for(const n of t)if(null!=n)if(!0===n)e.add(o);else{if(!1!==n)return;e.add(r)}return[...e]}(o,a),void 0!==i&&(a=void 0)),void 0===a&&void 0===i&&(a="ordinal"===e?"turbo":"tableau10"),void 0!==a))if(void 0!==i){const t=Jd(a),n=i[0],e=i[1]-i[0];i=({length:r})=>St((r=>t(n+e*r)),r)}else i=Hd(a);if(c===ce)throw new Error(`implicit unknown on ${t} scale is not supported`);return Sh(t,ue().unknown(c),n,{...u,type:e,domain:o,range:i,hint:s})}function $h(t,n,e,r){let{round:o}=e;return void 0!==o&&t.round(o=!!o),(t=Sh(r,t,n,e)).round=o,t}function Oh(t,n,e){const r=new fe;for(const{value:n,domain:e}of t){if(void 0!==e)return e();if(void 0!==n)for(const t of n)r.add(t)}if(void 0!==n){const[t,e]=Fn(r).map(n.floor,n);return n.range(t,n.offset(e))}if(r.size>1e4&&Ed.get(e)===bd)throw new Error(`implicit ordinal domain of ${e} scale has more than 10,000 values`);return pe(r,_p)}function kh(t,n){let e;for(const{hint:r}of t){const t=r?.[n];if(void 0!==t)if(void 0===e)e=t;else if(e!==t)return}return e}function Eh(t,n,e){return function(t,n=[],e={}){const r=function(t,n,{type:e,domain:r,range:o,scheme:i,pivot:a,projection:c}){if("fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==c||(e=xh);for(const{type:t}of n)if(void 0!==t)if(void 0===e)e=t;else if(e!==t)throw new Error(`scale incompatible with channel: ${e} !== ${t}`);if(e===xh)return;if(void 0!==e)return e;if(void 0===r&&!n.some((({value:t})=>void 0!==t)))return;const u=Ed.get(t);if(u===jd)return"sqrt";if(u===Od||u===$d)return"linear";if(u===kd)return"ordinal";if((r||o||[]).length>2)return Th(u);if(void 0!==r)return hd(r)?Th(u):yd(r)?"utc":u!==Sd||null==a&&!Xd(i)?"linear":"diverging";const s=n.map((({value:t})=>t)).filter((t=>void 0!==t));return s.some(hd)?Th(u):s.some(yd)?"utc":u!==Sd||null==a&&!Xd(i)?"linear":"diverging"}(t,n,e);if(void 0===e.type&&void 0===e.domain&&void 0===e.range&&null==e.interval&&"fx"!==t&&"fy"!==t&&Nh({type:r})){const e=n.map((({value:t})=>t)).filter((t=>void 0!==t));e.some(yd)?Nd(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Mh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Mh(r)}".`):e.some(gd)?Nd(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Mh(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Mh(r)}".`):e.some(vd)&&Nd(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Mh(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Mh(r)}".`)}switch(e.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":e=Ph(n,e,ed);break;case"identity":switch(Ed.get(t)){case bd:e=Ph(n,e,ed);break;case kd:e=Ph(n,e,Ch)}break;case"utc":case"time":e=Ph(n,e,od)}switch(r){case"diverging":return function(t,n,e){return dh(t,te(),gh,n,e)}(t,n,e);case"diverging-sqrt":return function(t,n,e){return hh(t,n,{...e,exponent:.5})}(t,n,e);case"diverging-pow":return hh(t,n,e);case"diverging-log":return function(t,n,{base:e=10,pivot:r=1,domain:o=ih(n,r<0?Wp:zp),...i}){return dh(t,ee().base(e=+e),vh,n,{domain:o,pivot:r,...i})}(t,n,e);case"diverging-symlog":return yh(t,n,e);case"categorical":case"ordinal":case bh:return jh(t,n,e);case"cyclical":case"sequential":case"linear":return function(t,n,e){return eh(t,In(),n,e)}(t,n,e);case"sqrt":return function(t,n,e){return rh(t,n,{...e,exponent:.5})}(t,n,e);case"threshold":return oh(t,0,e);case"quantile":return function(t,n,{range:e,quantiles:r=(void 0===e?5:(e=[...e]).length),n:o=r,scheme:i="rdylbu",domain:a=fh(n),unknown:c,interpolate:u,reverse:s}){return void 0===e&&(e=void 0!==u?St(u,o):Ed.get(t)===Sd?Vd(i,o):void 0),a.length>0&&(a=qn(a,void 0===e?{length:o}:e).quantiles()),oh(t,0,{domain:a,range:e,reverse:s,unknown:c})}(t,n,e);case"quantize":return function(t,n,{range:e,n:r=(void 0===e?5:(e=[...e]).length),scheme:o="rdylbu",domain:i=ah(t,n),unknown:a,interpolate:c,reverse:u}){const[s,l]=Fn(i);let f;return void 0===e?(f=_n(s,l,r),f[0]<=s&&f.splice(0,1),f[f.length-1]>=l&&f.pop(),r=f.length+1,e=void 0!==c?St(c,r):Ed.get(t)===Sd?Vd(o,r):void 0):(f=St(Un(s,l),r+1).slice(1,-1),s instanceof Date&&(f=f.map((t=>new Date(t))))),wd(ud(i))<0&&f.reverse(),oh(t,0,{domain:f,range:e,reverse:u,unknown:a})}(t,n,e);case"pow":return rh(t,n,e);case"log":return function(t,n,{base:e=10,domain:r=lh(n),...o}){return eh(t,Dn().base(e),n,{...o,domain:r})}(t,n,e);case"symlog":return function(t,n,{constant:e=1,...r}){return eh(t,Ln().constant(e),n,r)}(t,n,e);case"utc":return function(t,n,e){return wh(t,ae(),n,e)}(t,n,e);case"time":return function(t,n,e){return wh(t,ie(),n,e)}(t,n,e);case"point":return function(t,n,{align:e=.5,padding:r=.5,...o}){return $h(se().align(e).padding(r),n,o,t)}(t,n,e);case"band":return function(t,n,{align:e=.5,padding:r=.1,paddingInner:o=r,paddingOuter:i=("fx"===t||"fy"===t?0:r),...a}){return $h(le().align(e).paddingInner(o).paddingOuter(i),n,a,t)}(t,n,e);case"identity":return Ed.get(t)===bd?{type:"identity",scale:Bn()}:{type:"identity"};case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}(t,void 0===e?void 0:[{hint:e}],{...n})}function Mh(t){return"symbol"==typeof t?t.description:t}const xh={toString:()=>"projection"};function Th(t){switch(t){case bd:return"point";case Sd:return bh;default:return"ordinal"}}function Nh({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===bh}function Ph(t,{domain:n,...e},r){for(const n of t)void 0!==n.value&&(n.value=r(n.value));return{domain:void 0===n?n:r(n),...e}}function Ch(t){return sd(t,Td)}const Rh=function(t){let n,e;return(...r)=>((e?.length!==r.length||e.some(((t,n)=>t!==r[n])))&&(e=r,n=t(...r)),n)}((t=>new Intl.NumberFormat(t)));function Ih(t){return Bp(t,"Invalid Date")}function Ah(t,n){if((t=td(t))!==n)return t}!function(t="en-US"){const n=function(t="en-US"){const n=Rh(t);return t=>null==t||isNaN(t)?void 0:n.format(t)}(t)}();const Dh=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Lh(t){if(void 0===t)return"plot-d6a7b5";if(t=`${t}`,!Dh.test(t))throw new Error(`invalid class name: ${t}`);return t}function qh(t,n){if("string"==typeof n)t.property("style",n);else if(null!=n)for(const e of t)Object.assign(e.style,n)}function Fh(t){return Nh(t)&&void 0===t.interval?void 0:"tabular-nums"}function _h(t,n){if(null==n)return n;const e=t(n);if(!e)throw new Error(`scale not found: ${n}`);return e}function Uh(t,n={},e){let{columns:r,tickFormat:o,fontVariant:i=Fh(t),swatchSize:a=15,swatchWidth:c=a,swatchHeight:u=a,marginLeft:s=0,className:l,style:f,width:p}=n;const d=qd(n);l=Lh(l),o=function(t,n){return void 0===t?yd(n)?Ih:td:"function"==typeof t?t:("string"==typeof t?yd(n)?ye:ge:nd)(t)}(o,t.domain);const h=Fd("div",d).attr("class",`${l}-swatches ${l}-swatches-${null!=r?"columns":"wrap"}`);let y;return null!=r?(y=`.${l}-swatches-columns .${l}-swatch {\n  display: flex;\n  align-items: center;\n  break-inside: avoid;\n  padding-bottom: 1px;\n}\n.${l}-swatches-columns .${l}-swatch::before {\n  flex-shrink: 0;\n}\n.${l}-swatches-columns .${l}-swatch-label {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}`,h.style("columns",r).selectAll().data(t.domain).enter().append("div").attr("class",`${l}-swatch`).call(e,t,c,u).call((t=>t.append("div").attr("class",`${l}-swatch-label`).attr("title",o).text(o)))):(y=`.${l}-swatches-wrap {\n  display: flex;\n  align-items: center;\n  min-height: 33px;\n  flex-wrap: wrap;\n}\n.${l}-swatches-wrap .${l}-swatch {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n}`,h.selectAll().data(t.domain).enter().append("span").attr("class",`${l}-swatch`).call(e,t,c,u).append((function(){return this.ownerDocument.createTextNode(o.apply(this,arguments))}))),h.call((t=>t.insert("style","*").text(`.${l}-swatches {\n  font-family: system-ui, sans-serif;\n  font-size: 10px;\n  margin-bottom: 0.5em;\n}\n.${l}-swatch > svg {\n  margin-right: 0.5em;\n  overflow: visible;\n}\n${y}`))).style("margin-left",s?+s+"px":null).style("width",void 0===p?null:+p+"px").style("font-variant",Ah(i,"normal")).call(qh,f).node()}const zh=new Map([["symbol",function(t,{fill:n=(void 0!==t.hint?.fill?t.hint.fill:"none"),fillOpacity:e=1,stroke:r=(void 0!==t.hint?.stroke?t.hint.stroke:md(n)?"currentColor":"none"),strokeOpacity:o=1,strokeWidth:i=1.5,r:a=4.5,...c}={},u){const[s,l]=ad(n),[f,p]=ad(r),d=_h(u,s),h=_h(u,f),y=a*a*Math.PI;return e=cd(e)[1],o=cd(o)[1],i=cd(i)[1],Uh(t,c,((n,r,a,c)=>n.append("svg").attr("viewBox","-8 -8 16 16").attr("width",a).attr("height",c).attr("fill","color"===s?t=>d.scale(t):l).attr("fill-opacity",e).attr("stroke","color"===f?t=>h.scale(t):p).attr("stroke-opacity",o).attr("stroke-width",i).append("path").attr("d",(n=>{const e=me();return t.scale(n).draw(e,y),e}))))}],["color",Bh],["opacity",function({type:t,interpolate:n,...e},{legend:r=!0,color:o=we(0,0,0),...i}){if(!n)throw new Error(`${t} opacity scales are not supported`);!0===r&&(r="ramp");if("ramp"!==`${r}`.toLowerCase())throw new Error(`${r} opacity legends are not supported`);return Bh({type:t,...e,interpolate:Gh(o)},{legend:r,...i})}]]);function Wh({className:t,...n},{label:e,ticks:r,tickFormat:o}={},i){return function(t={},...n){let e=t;for(const r of n)for(const n in r)if(void 0===e[n]){const o=r[n];e===t?e={...e,[n]:o}:e[n]=o}return e}(i,{className:t,...n},{label:e,ticks:r,tickFormat:o})}function Bh(t,{legend:n=!0,...e}){if(!0===n&&(n="ordinal"===t.type?"swatches":"ramp"),void 0!==t.domain)switch(`${n}`.toLowerCase()){case"swatches":return function(t,{opacity:n,...e}={}){if(!Nh(t)&&!function({type:t}){return"threshold"===t}(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return Uh(t,e,((t,e,r,o)=>t.append("svg").attr("width",r).attr("height",o).attr("fill",e.scale).attr("fill-opacity",cd(n)[1]).append("rect").attr("width","100%").attr("height","100%")))}(t,e);case"ramp":return function(t,n){let{label:e=t.label,tickSize:r=6,width:o=240,height:i=44+r,marginTop:a=18,marginRight:c=0,marginBottom:u=16+r,marginLeft:s=0,style:l,ticks:f=(o-s-c)/64,tickFormat:p,fontVariant:d=Fh(t),round:h=!0,opacity:y,className:g}=n;const v=qd(n);g=Lh(g),y=cd(y)[1],null===p&&(p=()=>null);const m=Fd("svg",v).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",o).attr("height",i).attr("viewBox",`0 0 ${o} ${i}`).call((t=>t.append("style").text(`.${g}-ramp {\n  display: block;\n  background: white;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n  overflow: visible;\n}\n.${g}-ramp text {\n  white-space: pre;\n}`))).call(qh,l);let w,b=t=>t.selectAll(".tick line").attr("y1",a+u-i);const S=h?(t,n)=>t.rangeRound(n):(t,n)=>t.range(n),{type:j,domain:$,range:O,interpolate:k,scale:E,pivot:M}=t;if(k){const t=void 0===O?k:oe(1===k.length?ph(k):k,O);w=S(E.copy(),St(Un(s,o-c),Math.min($.length+(void 0!==M),void 0===O?1/0:O.length)));const n=256,e=v.document.createElement("canvas");e.width=n,e.height=1;const r=e.getContext("2d");for(let e=0,o=n-1;e<n;++e)r.fillStyle=t(e/o),r.fillRect(e,0,1,1);m.append("image").attr("opacity",y).attr("x",s).attr("y",a).attr("width",o-s-c).attr("height",i-a-u).attr("preserveAspectRatio","none").attr("xlink:href",e.toDataURL())}else if("threshold"===j){const t=$,n=void 0===p?t=>t:"string"==typeof p?ge(p):p;w=S(In().domain([-1,O.length-1]),[s,o-c]),m.append("g").attr("fill-opacity",y).selectAll().data(O).enter().append("rect").attr("x",((t,n)=>w(n-1))).attr("y",a).attr("width",((t,n)=>w(n)-w(n-1))).attr("height",i-a-u).attr("fill",(t=>t)),f=sd(t,((t,n)=>n)),p=e=>n(t[e],e)}else w=S(le().domain($),[s,o-c]),m.append("g").attr("fill-opacity",y).selectAll().data($).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",i-a-u).attr("fill",E),b=()=>{};return m.append("g").attr("transform",`translate(0,${i-u})`).call(ve(w).ticks(Array.isArray(f)?null:f,"string"==typeof p?p:void 0).tickFormat("function"==typeof p?p:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Ah(d,"normal")).call(b).call((t=>t.select(".domain").remove())),void 0!==e&&m.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(e),m.node()}(t,e);default:throw new Error(`unknown legend type: ${n}`)}}function Gh(t){const{r:n,g:e,b:r}=we(t)||we(0,0,0);return t=>`rgba(${n},${e},${r},${t})`}var Hh="#ch-plugin-legend",Vh={enabled:!0,itemSelector:null,label:null,width:130},Yh=function(){function n(t){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.name="Legend",this.calendar=t,this.root=null,this.shown=!1,this.options=Vh}var e,r,o;return e=n,r=[{key:"setup",value:function(t){this.options=Object.assign(Object.assign({},Vh),t)}},{key:"paint",value:function(){var n=this.calendar.options.options.scale,e=this.options,r=e.enabled,o=e.itemSelector;if(!r||o&&t(o).empty())return this.destroy();this.shown=!0,this.root=t(o||this.calendar.options.options.itemSelector),this.root.select(Hh).empty()?this.root=this.root.append("div").attr("id",Hh.slice(1)):this.root=this.root.select(Hh);var i=function(t={}){for(const[n,e]of zh){const r=t[n];if(fd(r)){const o=qd(t);let i;if("symbol"===n){const{fill:n,stroke:e=(void 0===n&&fd(t.color)?"color":void 0)}=t;i={fill:n,stroke:e}}return e(Eh(n,r,i),Wh(o,r,t),(n=>fd(t[n])?Eh(n,t[n]):null))}}throw new Error("unknown legend type; no scale found")}(Object.assign(Object.assign({},n),this.options));return this.root.selectAll("*").remove(),this.root.append((function(){return i})),Promise.resolve()}},{key:"destroy",value:function(){return null!==this.root&&(this.root.remove(),this.root=null),Promise.resolve()}}],r&&be(e.prototype,r),o&&be(e,o),Object.defineProperty(e,"prototype",{writable:!1}),n}();export{Yh as default};//# sourceMappingURL=Legend.min.esm.js.map
